{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{Container,Typography,Paper,Button}from'@mui/material';import ArrowBackIcon from'@mui/icons-material/ArrowBack';import{VaccinationRecordList}from'../components/VaccinationRecordList';import{VaccinationRecordForm}from'../components/VaccinationRecordForm';import{studentService,createVaccinationRecord,updateVaccinationRecord}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentVaccinationRecords=()=>{const{studentId}=useParams();const navigate=useNavigate();const[student,setStudent]=useState(null);const[isFormOpen,setIsFormOpen]=useState(false);const[selectedRecord,setSelectedRecord]=useState();const[error,setError]=useState(null);useEffect(()=>{if(studentId){loadStudent();}},[studentId]);const loadStudent=async()=>{try{const data=await studentService.getById(studentId);setStudent(data);setError(null);}catch(err){setError('Failed to load student data');console.error(err);}};const handleAdd=()=>{setSelectedRecord(undefined);setIsFormOpen(true);};const handleEdit=record=>{setSelectedRecord(record);setIsFormOpen(true);};const handleSubmit=async record=>{try{if(selectedRecord){await updateVaccinationRecord(selectedRecord.recordId,record);}else{await createVaccinationRecord(record);}setIsFormOpen(false);// Refresh the list\nif(studentId){loadStudent();}}catch(err){setError('Failed to save vaccination record');console.error(err);}};if(error){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error})});}if(!student){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Typography,{children:\"Loading...\"})});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3,mt:3},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(ArrowBackIcon,{}),onClick:()=>navigate('/students'),sx:{mb:2},children:\"Back to Students\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",gutterBottom:true,children:[\"Vaccination Records for \",student.firstName,\" \",student.lastName]}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"textSecondary\",gutterBottom:true,children:[\"Student ID: \",student.studentId]}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"textSecondary\",children:[\"Grade: \",student.grade,\" | Section: \",student.section]})]}),/*#__PURE__*/_jsx(VaccinationRecordList,{studentId:studentId,onEdit:handleEdit,onAdd:handleAdd}),/*#__PURE__*/_jsx(VaccinationRecordForm,{open:isFormOpen,onClose:()=>setIsFormOpen(false),onSubmit:handleSubmit,initialData:selectedRecord,studentId:studentId})]})});};export default StudentVaccinationRecords;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Typography","Paper","Button","ArrowBackIcon","VaccinationRecordList","VaccinationRecordForm","studentService","createVaccinationRecord","updateVaccinationRecord","jsx","_jsx","jsxs","_jsxs","StudentVaccinationRecords","studentId","navigate","student","setStudent","isFormOpen","setIsFormOpen","selectedRecord","setSelectedRecord","error","setError","loadStudent","data","getById","err","console","handleAdd","undefined","handleEdit","record","handleSubmit","recordId","children","color","sx","p","mt","style","marginBottom","startIcon","onClick","mb","variant","gutterBottom","firstName","lastName","grade","section","onEdit","onAdd","open","onClose","onSubmit","initialData"],"sources":["C:/Users/jesli/OneDrive/Desktop/BITS- 2nd Sem/FSAD/Assignment/vaccination-tracker/frontend/src/pages/StudentVaccinationRecords.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Container, Typography, Paper, Button } from '@mui/material';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport { VaccinationRecordList } from '../components/VaccinationRecordList';\r\nimport { VaccinationRecordForm } from '../components/VaccinationRecordForm';\r\nimport { VaccinationRecord, VaccinationRecordFormData, Student } from '../types';\r\nimport { studentService, createVaccinationRecord, updateVaccinationRecord } from '../services/api';\r\n\r\nconst StudentVaccinationRecords: React.FC = () => {\r\n  const { studentId } = useParams<{ studentId: string }>();\r\n  const navigate = useNavigate();\r\n  const [student, setStudent] = useState<Student | null>(null);\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [selectedRecord, setSelectedRecord] = useState<VaccinationRecord | undefined>();\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (studentId) {\r\n      loadStudent();\r\n    }\r\n  }, [studentId]);\r\n\r\n  const loadStudent = async () => {\r\n    try {\r\n      const data = await studentService.getById(studentId!);\r\n      setStudent(data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to load student data');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    setSelectedRecord(undefined);\r\n    setIsFormOpen(true);\r\n  };\r\n\r\n  const handleEdit = (record: VaccinationRecord) => {\r\n    setSelectedRecord(record);\r\n    setIsFormOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async (record: VaccinationRecordFormData) => {\r\n    try {\r\n      if (selectedRecord) {\r\n        await updateVaccinationRecord(selectedRecord.recordId, record);\r\n      } else {\r\n        await createVaccinationRecord(record);\r\n      }\r\n      setIsFormOpen(false);\r\n      // Refresh the list\r\n      if (studentId) {\r\n        loadStudent();\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to save vaccination record');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return (\r\n      <Container>\r\n        <Typography color=\"error\">{error}</Typography>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!student) {\r\n    return (\r\n      <Container>\r\n        <Typography>Loading...</Typography>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Paper sx={{ p: 3, mt: 3 }}>\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <Button\r\n            startIcon={<ArrowBackIcon />}\r\n            onClick={() => navigate('/students')}\r\n            sx={{ mb: 2 }}\r\n          >\r\n            Back to Students\r\n          </Button>\r\n          <Typography variant=\"h4\" gutterBottom>\r\n            Vaccination Records for {student.firstName} {student.lastName}\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\" gutterBottom>\r\n            Student ID: {student.studentId}\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n            Grade: {student.grade} | Section: {student.section}\r\n          </Typography>\r\n        </div>\r\n\r\n        <VaccinationRecordList\r\n          studentId={studentId!}\r\n          onEdit={handleEdit}\r\n          onAdd={handleAdd}\r\n        />\r\n\r\n        <VaccinationRecordForm\r\n          open={isFormOpen}\r\n          onClose={() => setIsFormOpen(false)}\r\n          onSubmit={handleSubmit}\r\n          initialData={selectedRecord}\r\n          studentId={studentId!}\r\n        />\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default StudentVaccinationRecords; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}