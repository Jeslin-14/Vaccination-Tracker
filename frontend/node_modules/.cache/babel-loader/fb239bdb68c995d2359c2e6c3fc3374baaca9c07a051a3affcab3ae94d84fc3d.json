{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jesli\\\\OneDrive\\\\Desktop\\\\BITS- 2nd Sem\\\\FSAD\\\\Assignment\\\\vaccination-tracker\\\\frontend\\\\src\\\\pages\\\\StudentVaccinationRecords.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Typography, Paper, Button } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport { VaccinationRecordList } from '../components/VaccinationRecordList';\nimport { VaccinationRecordForm } from '../components/VaccinationRecordForm';\nimport { studentService, createVaccinationRecord, updateVaccinationRecord } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentVaccinationRecords = () => {\n  _s();\n  const {\n    studentId\n  } = useParams();\n  const navigate = useNavigate();\n  const [student, setStudent] = useState(null);\n  const [isFormOpen, setIsFormOpen] = useState(false);\n  const [selectedRecord, setSelectedRecord] = useState();\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (studentId) {\n      loadStudent();\n    }\n  }, [studentId]);\n  const loadStudent = async () => {\n    try {\n      const data = await studentService.getById(studentId);\n      setStudent(data);\n      setError(null);\n    } catch (err) {\n      setError('Failed to load student data');\n      console.error(err);\n    }\n  };\n  const handleAdd = () => {\n    setSelectedRecord(undefined);\n    setIsFormOpen(true);\n  };\n  const handleEdit = record => {\n    setSelectedRecord(record);\n    setIsFormOpen(true);\n  };\n  const handleSubmit = async record => {\n    try {\n      if (selectedRecord) {\n        await updateVaccinationRecord(selectedRecord.recordId, record);\n      } else {\n        await createVaccinationRecord(record);\n      }\n      setIsFormOpen(false);\n      // Refresh the list\n      if (studentId) {\n        loadStudent();\n      }\n    } catch (err) {\n      setError('Failed to save vaccination record');\n      console.error(err);\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n  if (!student) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3,\n        mt: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 24\n          }, this),\n          onClick: () => navigate('/students'),\n          sx: {\n            mb: 2\n          },\n          children: \"Back to Students\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          children: [\"Vaccination Records for \", student.firstName, \" \", student.lastName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          color: \"textSecondary\",\n          gutterBottom: true,\n          children: [\"Student ID: \", student.studentId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle1\",\n          color: \"textSecondary\",\n          children: [\"Grade: \", student.grade, \" | Section: \", student.section]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VaccinationRecordList, {\n        studentId: studentId,\n        onEdit: handleEdit,\n        onAdd: handleAdd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VaccinationRecordForm, {\n        open: isFormOpen,\n        onClose: () => setIsFormOpen(false),\n        onSubmit: handleSubmit,\n        initialData: selectedRecord,\n        studentId: studentId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentVaccinationRecords, \"+3Ugcsm4mZ9TYqlEhiwPVXxq260=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = StudentVaccinationRecords;\nexport default StudentVaccinationRecords;\nvar _c;\n$RefreshReg$(_c, \"StudentVaccinationRecords\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Typography","Paper","Button","ArrowBackIcon","VaccinationRecordList","VaccinationRecordForm","studentService","createVaccinationRecord","updateVaccinationRecord","jsxDEV","_jsxDEV","StudentVaccinationRecords","_s","studentId","navigate","student","setStudent","isFormOpen","setIsFormOpen","selectedRecord","setSelectedRecord","error","setError","loadStudent","data","getById","err","console","handleAdd","undefined","handleEdit","record","handleSubmit","recordId","children","color","fileName","_jsxFileName","lineNumber","columnNumber","sx","p","mt","style","marginBottom","startIcon","onClick","mb","variant","gutterBottom","firstName","lastName","grade","section","onEdit","onAdd","open","onClose","onSubmit","initialData","_c","$RefreshReg$"],"sources":["C:/Users/jesli/OneDrive/Desktop/BITS- 2nd Sem/FSAD/Assignment/vaccination-tracker/frontend/src/pages/StudentVaccinationRecords.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Container, Typography, Paper, Button } from '@mui/material';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport { VaccinationRecordList } from '../components/VaccinationRecordList';\r\nimport { VaccinationRecordForm } from '../components/VaccinationRecordForm';\r\nimport { VaccinationRecord, VaccinationRecordFormData, Student } from '../types';\r\nimport { studentService, createVaccinationRecord, updateVaccinationRecord } from '../services/api';\r\n\r\nconst StudentVaccinationRecords: React.FC = () => {\r\n  const { studentId } = useParams<{ studentId: string }>();\r\n  const navigate = useNavigate();\r\n  const [student, setStudent] = useState<Student | null>(null);\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [selectedRecord, setSelectedRecord] = useState<VaccinationRecord | undefined>();\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (studentId) {\r\n      loadStudent();\r\n    }\r\n  }, [studentId]);\r\n\r\n  const loadStudent = async () => {\r\n    try {\r\n      const data = await studentService.getById(studentId!);\r\n      setStudent(data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to load student data');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    setSelectedRecord(undefined);\r\n    setIsFormOpen(true);\r\n  };\r\n\r\n  const handleEdit = (record: VaccinationRecord) => {\r\n    setSelectedRecord(record);\r\n    setIsFormOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async (record: VaccinationRecordFormData) => {\r\n    try {\r\n      if (selectedRecord) {\r\n        await updateVaccinationRecord(selectedRecord.recordId, record);\r\n      } else {\r\n        await createVaccinationRecord(record);\r\n      }\r\n      setIsFormOpen(false);\r\n      // Refresh the list\r\n      if (studentId) {\r\n        loadStudent();\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to save vaccination record');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return (\r\n      <Container>\r\n        <Typography color=\"error\">{error}</Typography>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!student) {\r\n    return (\r\n      <Container>\r\n        <Typography>Loading...</Typography>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Paper sx={{ p: 3, mt: 3 }}>\r\n        <div style={{ marginBottom: '2rem' }}>\r\n          <Button\r\n            startIcon={<ArrowBackIcon />}\r\n            onClick={() => navigate('/students')}\r\n            sx={{ mb: 2 }}\r\n          >\r\n            Back to Students\r\n          </Button>\r\n          <Typography variant=\"h4\" gutterBottom>\r\n            Vaccination Records for {student.firstName} {student.lastName}\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\" gutterBottom>\r\n            Student ID: {student.studentId}\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n            Grade: {student.grade} | Section: {student.section}\r\n          </Typography>\r\n        </div>\r\n\r\n        <VaccinationRecordList\r\n          studentId={studentId!}\r\n          onEdit={handleEdit}\r\n          onAdd={handleAdd}\r\n        />\r\n\r\n        <VaccinationRecordForm\r\n          open={isFormOpen}\r\n          onClose={() => setIsFormOpen(false)}\r\n          onSubmit={handleSubmit}\r\n          initialData={selectedRecord}\r\n          studentId={studentId!}\r\n        />\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default StudentVaccinationRecords; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}